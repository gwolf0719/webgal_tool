# WebGAL Script Editor Extension

åŠŸèƒ½å¼·å¤§çš„ WebGAL è…³æœ¬ç·¨è¼¯å™¨æ“´å±•ï¼Œç‚º Cursor å’Œ VS Code æä¾›å®Œæ•´çš„ WebGAL è…³æœ¬é–‹ç™¼æ”¯æŒã€‚

## å¿«é€Ÿå®‰è£

### æ–¹æ³•ä¸€ï¼šç›´æ¥ä¸‹è¼‰å®‰è£åŒ…

1. ä¸‹è¼‰ [webgal-script-extension-0.2.0.vsix](https://github.com/gwolf0719/webgal_tool/raw/main/webgal-script-extension-0.2.0.vsix)
2. åœ¨ VS Code/Cursor ä¸­ï¼šæ“´å±•é¢æ¿ â†’ `...` â†’ å¾ VSIX å®‰è£
3. é¸æ“‡ä¸‹è¼‰çš„æ–‡ä»¶

### æ–¹æ³•äºŒï¼šå‘½ä»¤è¡Œå®‰è£

```bash
# ä¸‹è¼‰æ–‡ä»¶
curl -LO https://github.com/gwolf0719/webgal_tool/raw/main/webgal-script-extension-0.2.0.vsix

# å®‰è£
code --install-extension webgal-script-extension-0.2.0.vsix
# æˆ–ä½¿ç”¨ Cursor
cursor --install-extension webgal-script-extension-0.2.0.vsix
```

è©³ç´°å®‰è£èªªæ˜è«‹æŸ¥çœ‹ [INSTALL.md](INSTALL.md)

## åŠŸèƒ½ç‰¹è‰²

### ğŸ¨ èªæ³•é«˜äº®
- ç²¾ç¾çš„èªæ³•è‘—è‰²ï¼Œå€åˆ†å‘½ä»¤ã€è§’è‰²åã€å°è©±ã€åƒæ•¸ã€è¨»é‡‹
- è‡ªå®šç¾©æ·±è‰²ä¸»é¡Œï¼Œæå‡é–±è®€é«”é©—

### âœ¨ æ™ºèƒ½è£œå…¨
- **å‘½ä»¤è£œå…¨**ï¼šè¼¸å…¥æ™‚è‡ªå‹•æç¤º 40+ ç¨® WebGAL å‘½ä»¤
- **å…§å»ºå‡½å¼è£œå…¨**ï¼šæ”¯æ´æ‰€æœ‰ WebGAL å…§å»ºå‡½å¼ï¼ˆrandomã€Math.randomã€åŸºæœ¬é‹ç®—ï¼‰
- **åƒæ•¸è£œå…¨**ï¼šæ ¹æ“šå‘½ä»¤é¡å‹æ™ºèƒ½æç¤ºå°æ‡‰åƒæ•¸
- **æ¢ä»¶åƒæ•¸è£œå…¨**ï¼šæ™ºèƒ½æç¤º `-when=` æ¢ä»¶è¡¨é”å¼åƒæ•¸
- **è³‡æºè£œå…¨**ï¼šè‡ªå‹•æƒæä¸¦è£œå…¨åœ–ç‰‡ã€éŸ³é »ã€å ´æ™¯æ–‡ä»¶
- **è§’è‰²åè£œå…¨**ï¼šè¿½è¹¤è…³æœ¬ä¸­å‡ºç¾çš„è§’è‰²å
- **è®Šæ•¸è£œå…¨**ï¼šè¿½è¹¤æ‰€æœ‰è®Šæ•¸å®šç¾©ï¼Œæ”¯æ´åœ¨æ¢ä»¶è¡¨é”å¼ä¸­ä½¿ç”¨
- **æ¨™ç±¤è£œå…¨**ï¼šåœ¨è·³è½‰æ™‚æç¤ºæ‰€æœ‰å¯ç”¨æ¨™ç±¤

### ğŸ” å®šç¾©è·³è½‰
- é»æ“Šæ¨™ç±¤åè·³è½‰åˆ°å®šç¾©ä½ç½®
- **ğŸ†• è·¨ç›®éŒ„å ´æ™¯è·³è½‰**ï¼šæ”¯æŒç›¸å°è·¯å¾‘å’Œçµ•å°è·¯å¾‘
- **ğŸ†• æ™ºèƒ½å ´æ™¯å‰µå»º**ï¼šé»æ“Šä¸å­˜åœ¨çš„å ´æ™¯æ™‚æä¾›å‰µå»ºé¸é …
- é»æ“Šè®Šæ•¸è·³è½‰åˆ°å®šç¾©è™•

### ğŸ“– Hover æç¤º
- æ‡¸åœå‘½ä»¤é¡¯ç¤ºè©³ç´°èªªæ˜å’Œç¯„ä¾‹
- æ‡¸åœè³‡æºæ–‡ä»¶é¡¯ç¤ºé è¦½ï¼ˆåœ–ç‰‡ã€éŸ³é »ä¿¡æ¯ï¼‰
- æ‡¸åœè®Šæ•¸é¡¯ç¤ºå®šç¾©ä½ç½®å’Œå€¼

### ğŸ—ºï¸ å¤§ç¶±è¦–åœ–
é¡¯ç¤ºå ´æ™¯çµæ§‹ï¼ŒåŒ…æ‹¬ï¼š
- ğŸ“ æ¨™ç±¤ (label)
- ğŸ”€ é¸æ“‡åˆ†æ”¯ (choose)
- ğŸ¬ å ´æ™¯èª¿ç”¨ (changeScene, callScene)
- ğŸ’¾ è®Šæ•¸å®šç¾© (setVar)

### ğŸ”§ èªæ³•è¨ºæ–·
å¯¦æ™‚æª¢æŸ¥ï¼š
- âŒ å‘½ä»¤æ‹¼å¯«éŒ¯èª¤
- âš ï¸ ç¼ºå°‘å¿…éœ€åƒæ•¸
- âš ï¸ è³‡æºæ–‡ä»¶ä¸å­˜åœ¨
- âŒ æ¨™ç±¤æœªå®šç¾©
- âš ï¸ è®Šæ•¸æœªå®šç¾©

### ğŸ†• å ´æ™¯ç®¡ç† (v0.2.0)
- **ğŸ¯ å ´æ™¯å‰µå»ºåš®å°**ï¼šå¿«é€Ÿå‰µå»ºæ–°å ´æ™¯æ–‡ä»¶æˆ–ç›®éŒ„
- **ğŸ“ å¤šå±¤ç›®éŒ„æ”¯æ´**ï¼šæ”¯æŒæœ€å¤š10å±¤æ·±åº¦çš„ç›®éŒ„çµæ§‹
- **ğŸ” æ™ºèƒ½è·¯å¾‘è§£æ**ï¼šè‡ªå‹•æœç´¢å¤šç¨®å¯èƒ½çš„å ´æ™¯è·¯å¾‘
- **âš¡ å¿«é€Ÿå ´æ™¯è·³è½‰**ï¼šä¸€éµè·³è½‰åˆ°ä»»æ„å ´æ™¯æ–‡ä»¶

### ğŸ”„ é‡æ§‹å·¥å…·
- é‡å‘½åæ¨™ç±¤ï¼Œè‡ªå‹•æ›´æ–°æ‰€æœ‰å¼•ç”¨
- é‡å‘½åè®Šæ•¸ï¼Œè‡ªå‹•æ›´æ–°æ‰€æœ‰ä½¿ç”¨
- æŸ¥æ‰¾æ‰€æœ‰å¼•ç”¨

### ğŸ“ ä»£ç¢¼ç‰‡æ®µ
å¿«é€Ÿæ’å…¥å¸¸ç”¨æ¨¡æ¿ï¼š
- å°è©±ã€æ—ç™½
- é¸æ“‡åˆ†æ”¯çµæ§‹
- æ¨™ç±¤å’Œè·³è½‰
- èƒŒæ™¯ã€ç«‹ç¹ªã€éŸ³æ¨‚åˆ‡æ›
- æ¢ä»¶åˆ¤æ–·

## ä½¿ç”¨æ–¹æ³•

### 1. é…ç½®

åœ¨è¨­ç½®ä¸­é…ç½® WebGAL éŠæˆ²ç›®éŒ„ï¼š

```json
{
  "webgal.gamePath": "game",
  "webgal.enablePreview": true,
  "webgal.validateResources": true,
  "webgal.suggestCharacters": true,
  "webgal.autoScanResources": true
}
```

### 2. èªæ³•ç¤ºä¾‹

```webgal
; é€™æ˜¯è¨»é‡‹
; å ´æ™¯ï¼šé–‹å§‹

label:start;

changeBg:background.jpg -next;
bgm:music.mp3;

è§’è‰²å:é€™æ˜¯ä¸€æ®µå°è©± -v=voice.ogg;
:é€™æ˜¯æ—ç™½;

; æ¢ä»¶è¡¨é”å¼ç¤ºä¾‹
setVar:player_score=100;
setVar:affection=50;

; åŸºæ–¼æ¢ä»¶çš„å ´æ™¯è·³è½‰
callScene:special_event.txt -when=player_score>80;

; åŸºæ–¼æ¢ä»¶çš„ç«‹ç¹ªè®ŠåŒ–
changeFigure:happy.png -when=affection>70;

; åŸºæ–¼æ¢ä»¶çš„éŸ³æ¨‚æ’­æ”¾
bgm:special_music.mp3 -when=player_score>=100;

choose:é¸é …A:labelA|é¸é …B:labelB;

label:labelA;
jumpLabel:end;

label:labelB;
jumpLabel:badEnd -when=affection<30;

label:end;
```

### 3. å¿«æ·å‘½ä»¤

- `Ctrl+Shift+P` â†’ è¼¸å…¥ "WebGAL" æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
- `webgal.insertDialogue` - æ’å…¥å°è©±
- `webgal.insertChoice` - æ’å…¥é¸æ“‡åˆ†æ”¯
- `webgal.insertLabel` - æ’å…¥æ¨™ç±¤
- `webgal.gotoLabel` - è·³è½‰åˆ°æ¨™ç±¤
- `webgal.scanResources` - æƒæè³‡æº
- **ğŸ†• `webgal.createSceneWizard` - å ´æ™¯å‰µå»ºåš®å°**
- **ğŸ†• `webgal.createScene` - å‰µå»ºå ´æ™¯**
- **ğŸ†• `webgal.gotoScene` - è·³è½‰åˆ°å ´æ™¯**

### 4. ä¸€éµæŸ¥çœ‹æ‰€æœ‰åŠŸèƒ½

**å¿«é€ŸæŸ¥çœ‹æ‰€æœ‰å¯ç”¨æŒ‡ä»¤**ï¼š
- åœ¨ä»»æ„ `.txt` æ–‡ä»¶ä¸­è¼¸å…¥ `Ctrl+Space` æŸ¥çœ‹æ‰€æœ‰è£œå…¨é¸é …
- è¼¸å…¥ä»»ä½• WebGAL å‘½ä»¤å¾ŒæŒ‰ `:` æŸ¥çœ‹è©²å‘½ä»¤çš„æ‰€æœ‰åƒæ•¸
- è¼¸å…¥ `-` æŸ¥çœ‹æ‰€æœ‰åƒæ•¸é¸é …ï¼ˆå¦‚ `-when=`, `-next`, `-v=` ç­‰ï¼‰
- è¼¸å…¥ `random` æŸ¥çœ‹äº‚æ•¸å‡½å¼è£œå…¨
- ä½¿ç”¨ `Ctrl+Shift+P` â†’ è¼¸å…¥ "WebGAL" æŸ¥çœ‹æ‰€æœ‰æ“´å±•å‘½ä»¤

**æ¢ä»¶è¡¨é”å¼æ™ºèƒ½æç¤º**ï¼š
- è¼¸å…¥ `-when=` æœƒè‡ªå‹•æç¤ºè®Šæ•¸åå’Œé‹ç®—ç¬¦
- æ”¯æ´è®Šæ•¸å®šç¾©è·³è½‰å’Œå¼•ç”¨æŸ¥æ‰¾
- è‡ªå‹•è£œå…¨æ¢ä»¶è¡¨é”å¼ä¸­çš„è®Šæ•¸å

### 5. ä»£ç¢¼ç‰‡æ®µ

è¼¸å…¥ä»¥ä¸‹å‰ç¶´ç„¶å¾ŒæŒ‰ Tabï¼š
- `dialogue` - å°è©±æ¨¡æ¿
- `choose` - é¸æ“‡åˆ†æ”¯æ¨¡æ¿
- `label` - æ¨™ç±¤å®šç¾©
- `jump` - è·³è½‰æ¨™ç±¤
- `changeBg` - æ›´æ”¹èƒŒæ™¯
- `setVar` - è¨­ç½®è®Šæ•¸

## WebGAL å‘½ä»¤åƒè€ƒ

### åŸºç¤å‘½ä»¤

| å‘½ä»¤ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| `è§’è‰²:å°è©±` | é¡¯ç¤ºå°è©± | `è§’è‰²:ä½ å¥½ -v=voice.ogg` |
| `changeBg` | æ›´æ”¹èƒŒæ™¯ | `changeBg:bg.jpg -next` |
| `changeFigure` | æ›´æ”¹ç«‹ç¹ª | `changeFigure:char.png -left` |
| `bgm` | æ’­æ”¾éŸ³æ¨‚ | `bgm:music.mp3` |
| `playVideo` | æ’­æ”¾è¦–é » | `playVideo:video.mp4` |

### æ§åˆ¶æµå‘½ä»¤

| å‘½ä»¤ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| `label` | å®šç¾©æ¨™ç±¤ | `label:start` |
| `jumpLabel` | è·³è½‰æ¨™ç±¤ | `jumpLabel:start` |
| `choose` | é¸æ“‡åˆ†æ”¯ | `choose:A:labelA\|B:labelB` |
| `setVar` | è¨­ç½®è®Šæ•¸ | `setVar:score=100` |
| `callScene` | èª¿ç”¨å ´æ™¯ | `callScene:sub.txt -when=flag==1` |
| `changeScene` | åˆ‡æ›å ´æ™¯ | `changeScene:next.txt` |

### é€²éšå‘½ä»¤

| å‘½ä»¤ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| `setAnimation` | è¨­ç½®å‹•ç•« | `setAnimation:enter -target=fig-left` |
| `miniAvatar` | å°é ­åƒ | `miniAvatar:avatar.png` |
| `unlockCg` | è§£é–CG | `unlockCg:cg.jpg -name=CGåç¨±` |
| `unlockBgm` | è§£é–BGM | `unlockBgm:music.mp3 -name=æ›²å` |
| `pixiPerform` | ç‰¹æ•ˆæ¼”å‡º | `pixiPerform:rain` |

## ğŸ§® WebGAL å…§å»ºå‡½å¼åƒè€ƒ

> **æ³¨æ„**ï¼šWebGAL ä½¿ç”¨ `angular-expressions` è§£æå™¨ï¼Œæ”¯æ´çš„è¡¨é”å¼åŠŸèƒ½æœ‰é™ã€‚ä»¥ä¸‹åˆ—å‡ºçš„æ˜¯**å¯¦éš›æ”¯æ´**çš„å‡½å¼ã€‚

### WebGAL åŸç”Ÿæ”¯æ´çš„å‡½å¼

| å‡½å¼ | èªªæ˜ | ç¯„ä¾‹ | è¿”å›å€¼ |
|------|------|------|--------|
| `random()` | WebGAL å…§å»ºäº‚æ•¸å‡½å¼ | `setVar:dice=random(1,6)` | 1-6 ä¹‹é–“çš„éš¨æ©Ÿæ•´æ•¸ |
| `random()` | ç„¡åƒæ•¸æ™‚ç­‰åŒ Math.random() | `setVar:rand=random()` | 0.0 ~ 1.0 |
| `Math.random()` | JavaScript åŸç”Ÿäº‚æ•¸ | `setVar:num=Math.random()` | 0.0 ~ 1.0 |

### åŸºæœ¬é‹ç®—æ”¯æ´

WebGAL æ”¯æ´åŸºæœ¬çš„æ•¸å­¸é‹ç®—ï¼š
- **å››å‰‡é‹ç®—**ï¼š`+`, `-`, `*`, `/`
- **æ‹¬è™Ÿé‹ç®—**ï¼š`()`
- **æ¯”è¼ƒé‹ç®—**ï¼š`>`, `<`, `>=`, `<=`, `==`, `!=`

```webgal
; åŸºæœ¬æ•¸å­¸é‹ç®—
setVar:result=5 + 3 * 2;        ; çµæœ: 11
setVar:score=player_score + bonus; ; è®Šæ•¸ç›¸åŠ 
setVar:percentage=current / max * 100; ; è¨ˆç®—ç™¾åˆ†æ¯”

; æ¢ä»¶è¡¨é”å¼
setVar:is_high_score=player_score > 1000;
setVar:can_afford=money >= item_price;
```

### äº‚æ•¸ç”Ÿæˆç¯„ä¾‹

```webgal
; ä½¿ç”¨ WebGAL å…§å»ºäº‚æ•¸å‡½å¼
setVar:dice_roll=random(1,6);     ; 1-6 ä¹‹é–“çš„éš¨æ©Ÿæ•´æ•¸
setVar:coin_flip=random(0,1);     ; 0 æˆ– 1
setVar:random_float=random();     ; 0.0-1.0 ä¹‹é–“çš„éš¨æ©Ÿå°æ•¸

; è¤‡é›œçš„äº‚æ•¸è¨ˆç®—ï¼ˆéœ€è¦æ‰‹å‹•å¯¦ç¾ï¼‰
setVar:random_int=Math.random() * 100; ; 0-100 çš„éš¨æ©Ÿå°æ•¸
setVar:random_choice=random(1,3);      ; 1-3 ä¹‹é–“çš„éš¨æ©Ÿæ•´æ•¸

; æ ¹æ“šäº‚æ•¸é€²è¡Œæ¢ä»¶åˆ¤æ–·
setVar:dice_roll=random(1,6);
if:dice_roll >= 4 -when=1;
  è§’è‰²:é‹æ°£ä¸éŒ¯ï¼éª°å­é¡¯ç¤º ${dice_roll}ï¼›
else;
  è§’è‰²:é‹æ°£ä¸ä½³...éª°å­é¡¯ç¤º ${dice_roll}ï¼›
endif;
```

### å¯¦éš›å¯ç”¨çš„ç¯„ä¾‹

```webgal
; åŸºæœ¬è®Šæ•¸æ“ä½œ
setVar:player_score=100;
setVar:bonus=50;
setVar:total_score=player_score + bonus; ; 150

; æ¢ä»¶åˆ¤æ–·
setVar:is_winner=total_score > 1000;
setVar:can_buy=money >= item_price;

; ç°¡å–®çš„éŠæˆ²é‚è¼¯
setVar:health=100;
setVar:damage=random(10,20);
setVar:new_health=health - damage;
setVar:is_alive=new_health > 0;

; ä½¿ç”¨åœ¨å°è©±ä¸­
if:is_alive -when=1;
  è§’è‰²:æˆ‘é‚„æ´»è‘—ï¼ç”Ÿå‘½å€¼ï¼š${new_health}ï¼›
else;
  è§’è‰²:æˆ‘è¢«æ“Šæ•—äº†...ï¼›
endif;
```

### âš ï¸ ä¸æ”¯æ´çš„åŠŸèƒ½

ä»¥ä¸‹ JavaScript åŠŸèƒ½åœ¨ WebGAL ä¸­**ä¸æ”¯æ´**ï¼š
- `Math.floor()`, `Math.ceil()`, `Math.round()` ç­‰æ•¸å­¸å‡½å¼
- `String.toUpperCase()`, `String.toLowerCase()` ç­‰å­—ä¸²å‡½å¼  
- `Array.push()`, `Array.pop()` ç­‰é™£åˆ—å‡½å¼
- `Date.now()`, `new Date()` ç­‰æ—¥æœŸå‡½å¼

å¦‚éœ€é€™äº›åŠŸèƒ½ï¼Œè«‹è€ƒæ…®åœ¨ WebGAL å¼•æ“å±¤é¢æ“´å±•æˆ–ä½¿ç”¨å…¶ä»–æ–¹å¼å¯¦ç¾ã€‚

## ğŸ¯ æ¢ä»¶è¡¨é”å¼ (`-when`) ä½¿ç”¨æŒ‡å—

### æ”¯æ´çš„æ¢ä»¶è¡¨é”å¼

WebGAL æ”¯æ´åœ¨è¨±å¤šå‘½ä»¤ä¸­ä½¿ç”¨ `-when` åƒæ•¸ä¾†å¯¦ç¾æ¢ä»¶åŸ·è¡Œï¼š

```webgal
; åŸºæœ¬æ¢ä»¶èªæ³•
command:args -when=condition;

; æ•¸å€¼æ¯”è¼ƒ
setVar:score=100;
callScene:bonus.txt -when=score>=100;
changeFigure:happy.png -when=score>80;

; è®Šæ•¸æ¯”è¼ƒ
setVar:affection=50;
bgm:love_music.mp3 -when=affection>=70;
jumpLabel:goodEnd -when=affection>90;

; è¤‡é›œæ¢ä»¶ï¼ˆä½¿ç”¨é‹ç®—ç¬¦ï¼‰
setVar:money=1000;
setVar:item_price=500;
callScene:shop.txt -when=money>=item_price;
```

### æ”¯æ´çš„é‹ç®—ç¬¦

| é‹ç®—ç¬¦ | èªªæ˜ | ç¯„ä¾‹ |
|--------|------|------|
| `>` | å¤§æ–¼ | `score>80` |
| `<` | å°æ–¼ | `score<50` |
| `>=` | å¤§æ–¼ç­‰æ–¼ | `score>=100` |
| `<=` | å°æ–¼ç­‰æ–¼ | `score<=200` |
| `==` | ç­‰æ–¼ | `score==100` |
| `!=` | ä¸ç­‰æ–¼ | `score!=0` |

### æ™ºèƒ½æç¤ºåŠŸèƒ½

æˆ‘å€‘çš„æ“´å±•æä¾›å®Œæ•´çš„æ¢ä»¶è¡¨é”å¼æ™ºèƒ½æç¤ºï¼š

1. **åƒæ•¸æç¤º**ï¼šè¼¸å…¥ `-` æœƒæç¤º `-when=` åƒæ•¸
2. **è®Šæ•¸è£œå…¨**ï¼šåœ¨ `-when=` å¾Œé¢æœƒè‡ªå‹•æç¤ºå·²å®šç¾©çš„è®Šæ•¸
3. **é‹ç®—ç¬¦è£œå…¨**ï¼šè¼¸å…¥æ¯”è¼ƒç¬¦è™Ÿæœƒæç¤ºå¯ç”¨é‹ç®—ç¬¦
4. **å®šç¾©è·³è½‰**ï¼šé»æ“Šæ¢ä»¶ä¸­çš„è®Šæ•¸å¯è·³è½‰åˆ°å®šç¾©ä½ç½®

### å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹

```webgal
; éŠæˆ²ç‹€æ…‹ç®¡ç†
setVar:chapter=1;
setVar:player_health=100;
setVar:player_money=500;
setVar:affection_heroine=30;

; åŸºæ–¼ç« ç¯€çš„å ´æ™¯æ§åˆ¶
changeScene:chapter2.txt -when=chapter>=2;
callScene:special_event.txt -when=chapter==3;

; åŸºæ–¼ç”Ÿå‘½å€¼çš„éŠæˆ²é‚è¼¯
changeFigure:injured.png -when=player_health<50;
bgm:sad_music.mp3 -when=player_health<=20;
jumpLabel:gameOver -when=player_health<=0;

; åŸºæ–¼é‡‘éŒ¢çš„å•†åº—ç³»çµ±
callScene:shop.txt -when=player_money>=100;
changeFigure:rich.png -when=player_money>=1000;

; åŸºæ–¼å¥½æ„Ÿåº¦çš„åŠ‡æƒ…åˆ†æ”¯
callScene:love_event.txt -when=affection_heroine>=70;
changeFigure:blush.png -when=affection_heroine>90;
jumpLabel:loveEnd -when=affection_heroine>=100;
```

## å°ˆæ¡ˆçµæ§‹å»ºè­°

```
game/
â”œâ”€â”€ scene/              # å ´æ™¯è…³æœ¬
â”‚   â”œâ”€â”€ start.txt
â”‚   â”œâ”€â”€ chapter1/       # æ”¯æŒå¤šå±¤ç›®éŒ„
â”‚   â”‚   â”œâ”€â”€ act1/       # ç¬¬äºŒå±¤
â”‚   â”‚   â”‚   â”œâ”€â”€ scene1.txt
â”‚   â”‚   â”‚   â””â”€â”€ scene2.txt
â”‚   â”‚   â””â”€â”€ act2/       # ç¬¬äºŒå±¤
â”‚   â”œâ”€â”€ chapter2/       # ç¬¬ä¸€å±¤
â”‚   â”‚   â””â”€â”€ act1/       # ç¬¬äºŒå±¤
â”‚   â””â”€â”€ endings/        # çµå±€ç›®éŒ„
â”œâ”€â”€ background/         # èƒŒæ™¯åœ–ç‰‡
â”œâ”€â”€ figure/            # ç«‹ç¹ª
â”œâ”€â”€ bgm/               # èƒŒæ™¯éŸ³æ¨‚
â”œâ”€â”€ vocal/             # èªéŸ³æ–‡ä»¶
â”œâ”€â”€ video/             # è¦–é »æ–‡ä»¶
â””â”€â”€ config.txt         # éŠæˆ²é…ç½®
```

### ğŸ†• å¤šå±¤ç›®éŒ„å ´æ™¯å¼•ç”¨ç¤ºä¾‹

```webgal
; æ”¯æŒç›¸å°è·¯å¾‘å¼•ç”¨
changeScene:chapter1/act1/scene1.txt;
callScene:../act2/intro.txt;

; æ”¯æŒè‡ªå‹•æ·»åŠ  .txt æ“´å±•å
changeScene:chapter1/act1/scene2;

; æ™ºèƒ½è·¯å¾‘è§£æï¼Œè‡ªå‹•æœç´¢å¤šç¨®å¯èƒ½è·¯å¾‘
changeScene:scene1.txt;  ; æœƒæç¤ºé¸æ“‡å¤šå€‹åŒ¹é…é …
```

## å¸¸è¦‹å•é¡Œ

### Q: è³‡æºè£œå…¨ä¸å·¥ä½œï¼Ÿ
A: ç¢ºä¿ `webgal.gamePath` é…ç½®æ­£ç¢ºï¼Œä¸¦é‹è¡Œ "WebGAL: æƒæè³‡æº" å‘½ä»¤ã€‚

### Q: å¦‚ä½•è‡ªå®šç¾©èªæ³•é«˜äº®é¡è‰²ï¼Ÿ
A: åœ¨è¨­ç½®ä¸­ä¿®æ”¹ `editor.tokenColorCustomizations`ã€‚

### Q: æ”¯æŒå¤šèªè¨€å—ï¼Ÿ
A: ç›®å‰æ”¯æŒç¹é«”ä¸­æ–‡ç•Œé¢ï¼Œè…³æœ¬å…§å®¹å¯ä½¿ç”¨ä»»ä½•èªè¨€ã€‚

### Q: å¦‚ä½•å‰µå»ºå¤šå±¤ç›®éŒ„çš„å ´æ™¯æ–‡ä»¶ï¼Ÿ
A: ä½¿ç”¨ "WebGAL: å ´æ™¯å‰µå»ºåš®å°" å‘½ä»¤ï¼Œå¯ä»¥è¼¸å…¥å¦‚ `chapter1/act1/scene1.txt` çš„å¤šå±¤è·¯å¾‘ã€‚

### Q: å ´æ™¯è·³è½‰æ‰¾ä¸åˆ°æ–‡ä»¶æ€éº¼è¾¦ï¼Ÿ
A: æ“´å±•æœƒè‡ªå‹•æœç´¢å¤šç¨®å¯èƒ½çš„è·¯å¾‘ï¼Œå¦‚æœæ‰¾ä¸åˆ°æœƒæä¾›å‰µå»ºé¸é …ã€‚ç¢ºä¿ `webgal.gameBasePath` é…ç½®æ­£ç¢ºã€‚

### Q: WebGAL æ”¯æ´å“ªäº›å…§å»ºå‡½å¼ï¼Ÿ
A: WebGAL ä½¿ç”¨ `angular-expressions` è§£æå™¨ï¼Œæ”¯æ´çš„åŠŸèƒ½æœ‰é™ã€‚ä¸»è¦æ”¯æ´ï¼š
- `random(min,max)` - ç”ŸæˆæŒ‡å®šç¯„åœçš„éš¨æ©Ÿæ•´æ•¸
- `random()` - ç”Ÿæˆ 0-1 çš„éš¨æ©Ÿå°æ•¸
- `Math.random()` - JavaScript åŸç”Ÿäº‚æ•¸
- åŸºæœ¬æ•¸å­¸é‹ç®—ï¼š`+`, `-`, `*`, `/`, `()`
- æ¯”è¼ƒé‹ç®—ï¼š`>`, `<`, `>=`, `<=`, `==`, `!=`

### Q: å¦‚ä½•å¿«é€ŸæŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„å‘½ä»¤å’Œå‡½å¼ï¼Ÿ
A: 
- åœ¨ä»»æ„ä½ç½®æŒ‰ `Ctrl+Space` æŸ¥çœ‹æ‰€æœ‰è£œå…¨é¸é …
- è¼¸å…¥å‘½ä»¤åå¾ŒæŒ‰ `:` æŸ¥çœ‹åƒæ•¸è£œå…¨
- è¼¸å…¥ `random` æŸ¥çœ‹äº‚æ•¸å‡½å¼è£œå…¨
- ä½¿ç”¨ `Ctrl+Shift+P` â†’ è¼¸å…¥ "WebGAL" æŸ¥çœ‹æ‰€æœ‰æ“´å±•å‘½ä»¤

### Q: ç‚ºä»€éº¼æœ‰äº› JavaScript å‡½å¼ä¸èƒ½ä½¿ç”¨ï¼Ÿ
A: WebGAL ç‚ºäº†å®‰å…¨æ€§å’Œæ•ˆèƒ½è€ƒé‡ï¼Œä½¿ç”¨å—é™çš„ `angular-expressions` è§£æå™¨ï¼Œä¸æ”¯æ´å®Œæ•´çš„ JavaScript åŠŸèƒ½ã€‚å¦‚éœ€æ›´å¤šå‡½å¼ï¼Œå»ºè­°åœ¨ WebGAL å¼•æ“å±¤é¢æ“´å±•ã€‚

### Q: å¦‚ä½•ä½¿ç”¨æ¢ä»¶è¡¨é”å¼ (`-when`) åƒæ•¸ï¼Ÿ
A: æˆ‘å€‘çš„æ“´å±•æä¾›å®Œæ•´çš„æ¢ä»¶è¡¨é”å¼æ™ºèƒ½æç¤ºï¼š
- è¼¸å…¥ `-` æœƒæç¤º `-when=` åƒæ•¸
- æ”¯æ´è®Šæ•¸è£œå…¨å’Œé‹ç®—ç¬¦æç¤º
- æ”¯æ´å®šç¾©è·³è½‰å’Œå¼•ç”¨æŸ¥æ‰¾
- æ”¯æ´æ‰€æœ‰æ¯”è¼ƒé‹ç®—ç¬¦ï¼š`>`, `<`, `>=`, `<=`, `==`, `!=`

### Q: æ¢ä»¶è¡¨é”å¼æ”¯æ´å“ªäº›å‘½ä»¤ï¼Ÿ
A: å¤§å¤šæ•¸ WebGAL å‘½ä»¤éƒ½æ”¯æ´ `-when` åƒæ•¸ï¼ŒåŒ…æ‹¬ï¼š
- `callScene`, `changeScene` - æ¢ä»¶å ´æ™¯è·³è½‰
- `changeFigure`, `changeBg` - æ¢ä»¶è¦–è¦ºè®ŠåŒ–
- `bgm`, `playVideo` - æ¢ä»¶åª’é«”æ’­æ”¾
- `jumpLabel` - æ¢ä»¶æ¨™ç±¤è·³è½‰
- ä»¥åŠæ›´å¤šå‘½ä»¤...

## åé¥‹èˆ‡è²¢ç»

- å•é¡Œåé¥‹ï¼š[GitHub Issues](https://github.com/your-repo/issues)
- åŠŸèƒ½å»ºè­°ï¼šæ­¡è¿æäº¤ Pull Request

## ç‰ˆæœ¬æ­·å²

### 0.2.0 (2025-10-15) ğŸ†•
- **ğŸ¯ å ´æ™¯å‰µå»ºåš®å°**ï¼šå¿«é€Ÿå‰µå»ºæ–°å ´æ™¯æ–‡ä»¶æˆ–ç›®éŒ„
- **ğŸ“ å¤šå±¤ç›®éŒ„æ”¯æ´**ï¼šæ”¯æŒæœ€å¤š10å±¤æ·±åº¦çš„ç›®éŒ„çµæ§‹
- **ğŸ” è·¨ç›®éŒ„å ´æ™¯è·³è½‰**ï¼šæ”¯æŒç›¸å°è·¯å¾‘å’Œçµ•å°è·¯å¾‘
- **âš¡ æ™ºèƒ½å ´æ™¯ç®¡ç†**ï¼šè‡ªå‹•ç”Ÿæˆå ´æ™¯æ¨¡æ¿
- **ğŸ› ï¸ æ–°å¢å‘½ä»¤**ï¼š`createSceneWizard`ã€`createScene`ã€`gotoScene`
- **ğŸ”§ å¢å¼·è£œå…¨**ï¼šè·¨ç›®éŒ„å ´æ™¯æ–‡ä»¶è£œå…¨
- **ğŸ§® å…§å»ºå‡½å¼æ”¯æ´**ï¼šWebGAL å¯¦éš›æ”¯æ´çš„å‡½å¼è£œå…¨ï¼ˆrandomã€Math.randomã€åŸºæœ¬é‹ç®—ï¼‰
- **ğŸ“š å‡½å¼æ–‡æª”**ï¼šæº–ç¢ºçš„å…§å»ºå‡½å¼èªªæ˜å’Œå¯¦éš›å¯ç”¨ç¯„ä¾‹
- **âš¡ ä¸€éµæŸ¥çœ‹**ï¼šå¿«é€ŸæŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤å’Œå‡½å¼
- **âš ï¸ åŠŸèƒ½é™åˆ¶èªªæ˜**ï¼šæ˜ç¢ºæ¨™ç¤ºä¸æ”¯æ´çš„ JavaScript åŠŸèƒ½
- **ğŸ¯ æ¢ä»¶è¡¨é”å¼æ”¯æ´**ï¼šå®Œæ•´çš„ `-when` åƒæ•¸æ™ºèƒ½æç¤ºå’Œæ–‡æª”
- **ğŸ” æ¢ä»¶è®Šæ•¸è£œå…¨**ï¼šæ¢ä»¶è¡¨é”å¼ä¸­çš„è®Šæ•¸å®šç¾©è·³è½‰å’Œå¼•ç”¨æŸ¥æ‰¾

### 0.1.0 (2025-10-14)
- âœ¨ åˆå§‹ç‰ˆæœ¬ç™¼å¸ƒ
- ğŸ¨ èªæ³•é«˜äº®æ”¯æŒ
- âœ¨ æ™ºèƒ½è£œå…¨åŠŸèƒ½
- ğŸ” å®šç¾©è·³è½‰
- ğŸ“– Hover æç¤º
- ğŸ—ºï¸ å¤§ç¶±è¦–åœ–
- ğŸ”§ èªæ³•è¨ºæ–·
- ğŸ”„ é‡æ§‹å·¥å…·

## æˆæ¬Š

MIT License

---

ç”± WebGAL ç¤¾å€é–‹ç™¼ â¤ï¸ ç‚ºè¦–è¦ºå°èªªå‰µä½œè€…æä¾›æœ€ä½³ç·¨è¼¯é«”é©—

